<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <base href="./" />
  <title>Диктофон</title>
  <link rel="icon" href="assets/logo400.jpg" />
  <link rel="manifest" href="manifest.json" />

  <!-- === НЕ ТРОГАТЬ: общие стили/шаблон сайта === -->
  <link rel="stylesheet" href="css/main.css" />

  <!-- voicerecorder CSS (scoped) -->
  <link rel="stylesheet" href="voicerecorder/voicerecorder.css" />

  <!-- mic-indicator styles (в папке voicerecorder/mic-indicator/) -->
  <link rel="stylesheet" href="voicerecorder/mic-indicator/mic-indicator.css">
</head>
<body>
<div id="page">
  <aside id="sidebar" aria-label="Основное меню"></aside>
  <div id="app">
    <header id="topbar" role="banner"></header>

    <!-- IMPORTANT: module is strictly namespaced by data-module attr -->
    <main id="main" role="main" data-module="voicerecorder">
      <section class="vc-recorder" aria-labelledby="vc-title">
        <h1 id="vc-title" class="vc-title">ДИКТОФОН</h1>

        <div class="vc-controls" role="region" aria-label="Управление записью">
          <button id="vc-btn-start" class="vc-btn vc-btn-start" aria-pressed="false">СТАРТ</button>
          <button id="vc-btn-pause" class="vc-btn vc-btn-pause" disabled>ПАУЗА</button>
          <button id="vc-btn-stop" class="vc-btn vc-btn-stop" disabled>СТОП</button>
        </div>

        <!-- Контейнер для индикатора уровня звука -->
        <div id="vc-level" class="vc-level" aria-hidden="true"></div>

        <div class="vc-result">
          <div class="vc-player">
            <audio id="vc-audio" controls></audio>
          </div>

          <div class="vc-transcript" aria-live="polite">
            <h2 class="vc-sub">Текстовая версия</h2>
            <div id="vc-transcript" class="vc-transcript-box" contenteditable="false"></div>
          </div>
        </div>

        <div id="vc-status" class="vc-status" aria-live="status">Готов</div>
      </section>
    </main>

    <footer id="footer" role="contentinfo"></footer>
  </div>
</div>

<div id="overlay" hidden></div>

<script type="module" src="voicerecorder/mic-indicator/mic-indicator.js"></script>

<script defer src="js/fragment-load.js"></script>

<!-- voicerecorder module script (scoped) — в нём есть вызовы connectStream(mediaStream) внутри startRecording() -->
<script defer src="voicerecorder/voicerecorder.js"></script>
<script defer src="js/register-sw.js"></script>
</body>
</html>
